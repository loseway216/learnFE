<template>
  <div class="side">
    <div class="item" @click="gofunc(data[0],0)" :class="{ onChoose: data[0].flag }">
      <LeftTitleVue>
        <template v-slot>
          <span>安全态势感知</span>
        </template>
      </LeftTitleVue>
      <div class="sub-title">
        <span class="sub-title-square"></span>
        <span class="sub-title-text">相关数据</span>
        <span class="sub-title-line"></span>
      </div>
      <ul>
        <li><span>已接入工厂数量：6</span></li>
        <li><span>供应商数量：6</span></li>
        <li><span>每秒数据流大小：6</span></li>
        <li><span>设备数量：6</span></li>
      </ul>
    </div>
    <div class="item" :class="{ onChoose: data[1].flag }">
      <LeftTitleVue>
        <template v-slot>
          <span>工业互联架构</span>
        </template>
      </LeftTitleVue>
      <div class="industryClick" ref="industryClick">
        <span v-for="(item,index) in data[1].path" @click="gofunc1(index)">
          {{item.params.id}}
        </span>
        <!-- <span style="background:#167cff" @click.stop="gofunc(data[1],0)">上海一厂</span>
        <span @click.stop="gofunc(data[1],1)">上海二厂</span>
        <span @click.stop="gofunc(data[1],0)">上海三厂</span> -->
      </div>
      <ul class="topo-bgc">

      </ul>
    </div>
    <div class="item" @click="gofunc(data[2],0)" :class="{ onChoose: data[2].flag }">
      <LeftTitleVue>
        <template v-slot>
          <span>设备在线监测</span>
        </template>
      </LeftTitleVue>
      <ul class="bitmap">
      </ul>
    </div>
  </div>
</template>

<script setup>
import LeftTitleVue from '../components/LeftTitle/LeftTitle.vue';
import {reactive,ref} from 'vue';
import { useRouter, useRoute } from 'vue-router'


const data = reactive([
  {
    title: '全国地图',
    flag: true,
    path: [{ name: 'Map' }],
  },
  {
    title: '拓扑图',
    flag: false,
    path: [{ name: 'Topo', params: { id: '上海一厂' } }, { name: 'Topo', params: { id: '上海二厂' } }, { name: 'Topo', params: { id: '上海三厂' } }],
  },
  {
    title: '点位图',
    flag: false,
    path: [{ name: 'Points', params: { id: '上海一厂' } }],
  },
]);

const router = useRouter();
const route = useRoute();

function gofunc(item, index) {
  router.push(item.path[index])
  for (let i of data) {
    i.flag = false
  }
  for (let item of industryClick.value.children) {
    item.style.backgroundColor = '';
  }
  item.flag = true
}
const industryClick = ref(null)

function gofunc1(index) {
  router.push(data[1].path[index])
  data[0].flag = false;
  data[2].flag = false;
  data[1].flag = true;
  for (let item of industryClick.value.children) {
    item.style.backgroundColor = '';
  }
  industryClick.value.children[index].style.backgroundColor = '#167cff'; 
}

</script>
<style scoped lang="less">



.side {
  display: flex;
  flex-flow: row wrap;
  align-content: space-around; 
  font-size: 16px;
  .item {
      width: 100%;
      height: 33.3%;
      display: flex;
      flex-direction: column;
      padding-top: 10px;


  }
  .sub-title {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;
    font-size: 18px;
    color: #00FFE4;
    text-align: left;
    line-height: 26px;
    height: 26px;
    padding-left: 25px;
    margin-bottom: 8px;
    .sub-title-line {
      display: inline-block;
      background: linear-gradient(to right, #fff, #fff, rgba(255, 255, 255, 0));
      width: 70%;
      height: 1px;
      line-height: 6px;
      position: relative;
      left: 2px;
      top: -6px;
    }
    .sub-title-square {
      display: inline-block;
      background: #fff;
      width: 6px;
      height: 6px;
      margin-left: 8px;
      margin-right: 8px;
      position: relative;
      top: -4px;
    }
  }
}

.item ul{
  flex: 1;
  margin-left: 50px;
  height: 80%;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
}

.item .bitmap{
  margin-left: 20px;
  margin-right: 20px;
  background: url(../../../assets/images/bitmap.gif) center center / contain no-repeat;
 
}

.item .topo-bgc{
  margin-left: 20px;
  margin-right: 20px;
  background: url(../../../assets/images/topo-demo.png) center center / contain no-repeat;

}

.onChoose{
  box-shadow: 0px 0px 20px rgb(51 102 255 / 55%) inset;
}

.industryClick{
  margin-left: 20px;
  margin-right: 10px;
  height: 52px;
  line-height: 52px;
  text-align: center;
  display: flex;
  background: rgba(51, 102, 255, 0.10);
  border: 1px solid rgba(51, 102, 255, 0.50);
  color: #00FFE4;
  cursor: pointer;
  span{
    flex: 1;
    border-right: 1px solid rgba(51, 102, 255, 0.50);
  }
  :last-child {
    border-right: none
  }
}
</style>